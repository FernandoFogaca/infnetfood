import React from "react";
import { View, Text, Image, Platform, StyleSheet } from "react-native";

const restaurantes = [
  { id: "1", nome: "Amsterdam Fries", endereco: "Damrak 12, Amsterdam" },
  { id: "2", nome: "Rotterdam Stroopwafels", endereco: "Coolsingel 45, Rotterdam" },
  { id: "3", nome: "Utrecht Cheese House", endereco: "Oudegracht 101, Utrecht" },
];

export default function MapScreen() {
  if (Platform.OS === "web") {
    return (
      <View style={styles.container}>
        <Text style={styles.title}>Mapa Simulado</Text>
        <Image
          source={{ uri: "https://i.imgur.com/tK5A2wM.png" }}
          style={styles.mapImage}
          resizeMode="cover"
        />
        <Text style={styles.info}>No celular você verá o mapa real.</Text>
      </View>
    );
  }

  // Importa apenas no Android/iOS
  const MapView = require("react-native-maps").default;
  const Marker = require("react-native-maps").Marker;

  return (
    <View style={{ flex: 1 }}>
      <MapView
        style={{ flex: 1 }}
        initialRegion={{
          latitude: 52.3676,
          longitude: 4.9041,
          latitudeDelta: 0.1,
          longitudeDelta: 0.1,
        }}
      >
        {restaurantes.map((r, i) => (
          <Marker
            key={r.id}
            coordinate={{
              latitude: 52.36 + i * 0.02,
              longitude: 4.89 + i * 0.02,
            }}
            title={r.nome}
            description={r.endereco}
          />
        ))}
      </MapView>
    </View>
  );
}

const styles = StyleSheet.create({
  container: { flex: 1, padding: 16, backgroundColor: "white" },
  title: { fontSize: 22, fontWeight: "bold", marginBottom: 12 },
  mapImage: { width: "100%", height: 400, borderRadius: 8 },
  info: { marginTop: 10, color: "gray" },
});
